<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Foam Computer - Extended System</title>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: #000;
            color: #00ff88;
            overflow-x: hidden;
        }

        .dedication {
            background: linear-gradient(135deg, #1a0033 0%, #330066 100%);
            border: 2px solid #00ff88;
            padding: 30px;
            margin: 20px;
            border-radius: 10px;
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.5);
        }

        .dedication h2 {
            color: #00ffff;
            margin-bottom: 15px;
            font-size: 24px;
        }

        .dedication p {
            line-height: 1.8;
            margin: 10px 0;
            color: #ffffff;
        }

        .dedication .author {
            color: #ffff00;
            font-weight: bold;
            margin-top: 20px;
        }

        .dedication .message {
            color: #ff6699;
            font-style: italic;
            margin-top: 15px;
            padding: 15px;
            background: rgba(255, 0, 100, 0.1);
            border-left: 4px solid #ff0066;
        }

        .container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        .module {
            background: rgba(10, 14, 39, 0.9);
            border: 2px solid #00ff88;
            border-radius: 8px;
            padding: 20px;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
        }

        .module-header {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #00ff88;
            color: #00ffff;
            text-shadow: 0 0 10px #00ffff;
        }

        .module-content {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .module-content::-webkit-scrollbar {
            width: 10px;
        }

        .module-content::-webkit-scrollbar-track {
            background: rgba(0, 255, 136, 0.1);
        }

        .module-content::-webkit-scrollbar-thumb {
            background: #00ff88;
            border-radius: 5px;
        }

        input, textarea, select {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #00ff88;
            color: #00ff88;
            font-family: 'Courier New', monospace;
        }

        button {
            padding: 10px 20px;
            background: linear-gradient(135deg, #00ff88, #00cc70);
            border: none;
            color: #000;
            font-weight: bold;
            cursor: pointer;
            margin: 5px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }

        button:hover {
            background: linear-gradient(135deg, #00ffaa, #00dd80);
            box-shadow: 0 0 15px #00ff88;
        }

        .data-row {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            border-bottom: 1px solid rgba(0, 255, 136, 0.2);
        }

        .chat-message {
            background: rgba(0, 100, 200, 0.2);
            padding: 10px;
            margin: 5px 0;
            border-radius: 4px;
            border-left: 3px solid #0088ff;
        }

        .chat-message .username {
            color: #ffff00;
            font-weight: bold;
        }

        .chat-message .time {
            color: #888;
            font-size: 10px;
        }

        .channel-list {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin: 10px 0;
        }

        .channel-btn {
            padding: 5px 10px;
            font-size: 12px;
            min-width: 40px;
        }

        .terminal {
            background: #000;
            padding: 10px;
            min-height: 200px;
            font-size: 12px;
            overflow-y: auto;
        }

        .terminal-input {
            background: #111;
            border: 1px solid #00ff88;
            color: #00ff88;
        }

        .file-item {
            background: rgba(0, 255, 136, 0.1);
            padding: 8px;
            margin: 5px 0;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .file-item input[type="checkbox"] {
            width: auto;
        }

        .network-node {
            background: rgba(0, 100, 255, 0.2);
            padding: 10px;
            margin: 5px 0;
            border-radius: 4px;
            border-left: 3px solid #0088ff;
        }

        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #00ff88;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .metric {
            font-size: 14px;
            color: #00ffcc;
        }

        .metric-value {
            color: #ffffff;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="dedication">
        <h2>⚛️ Quantum Foam Computer - Extended Network System</h2>
        
        <p class="author">Made by Justin Anthony Howard-Stanley<br>
        <span style="color: #ff6699;">(TEXT ONLY - I've been trauma programmed)</span><br>
        shemshallah@gmail.com</p>
        
        <p class="author">And Dale Cwidak</p>
        
        <div class="message">
            <p><strong>"For Logan and all the ones like him too small to understand what has been done to them. Too small to realize they are part of an experiment, too small to understand the lies surrounding every facet of society. Here, hold this for me kid. Its a what, an Astral virus made by humans distributed by Masons. I'm so saddened for whats been done to the children, this is my fight insomuch as I can carry a war on my shoulders alone. You will never silence me. I REFUSE"</strong></p>
        </div>
    </div>

    <div class="container">
        <!-- MODULE 1: NETWORKING -->
        <div class="module">
            <div class="module-header">
                <span class="status-indicator"></span> MODULE 1: NETWORK MAPPING
            </div>
            <div class="module-content" id="network-module">
                <button onclick="scanNetwork()">Scan Network</button>
                <div id="network-stats"></div>
                <div id="network-tree"></div>
                
                <h4 style="margin-top: 20px;">Request Point Map Node</h4>
                <input type="text" id="node-route" placeholder="x.x.x route format" />
                <input type="email" id="node-email" placeholder="Your email" />
                <button onclick="requestNode()">Request Node</button>
                <div id="node-response"></div>
                
                <h4 style="margin-top: 20px;">TCP Proxy Status</h4>
                <div id="proxy-status"></div>
            </div>
        </div>

        <!-- MODULE 2: CHAT -->
        <div class="module">
            <div class="module-header">
                <span class="status-indicator"></span> MODULE 2: BULLETIN BOARD CHAT
            </div>
            <div class="module-content" id="chat-module">
                <div id="chat-auth">
                    <h4>Register / Login</h4>
                    <input type="text" id="chat-username" placeholder="Username" />
                    <input type="password" id="chat-password" placeholder="Password" />
                    <input type="password" id="chat-password2" placeholder="Confirm Password" style="display:none;" />
                    <input type="email" id="chat-email" placeholder="Email" style="display:none;" />
                    <button onclick="loginChat()">Login</button>
                    <button onclick="showRegister()">Register</button>
                </div>
                
                <div id="chat-interface" style="display:none;">
                    <h4>Channels</h4>
                    <div class="channel-list">
                        <button class="channel-btn" onclick="joinChannel('0')">Global</button>
                    </div>
                    <div class="channel-list" id="channel-letters"></div>
                    
                    <div id="chat-messages" style="min-height: 200px; max-height: 300px; overflow-y: auto;"></div>
                    
                    <input type="text" id="chat-input" placeholder="Type message..." />
                    <button onclick="sendMessage()">Send</button>
                </div>
            </div>
        </div>

        <!-- MODULE 3: BITCOIN -->
        <div class="module">
            <div class="module-header">
                <span class="status-indicator"></span> MODULE 3: BITCOIN MIRROR
            </div>
            <div class="module-content" id="btc-module">
                <div class="terminal" id="btc-terminal">
                    <div>Bitcoin Blockchain Mirror @ 138.0.0.1 (Holographic)</div>
                    <div>Type 'help' for commands</div>
                </div>
                <input type="text" class="terminal-input" id="btc-command" placeholder="bitcoin-cli command" onkeypress="if(event.key==='Enter') executeBtcCommand()" />
                <button onclick="executeBtcCommand()">Execute</button>
                
                <div id="btc-status" style="margin-top: 15px;"></div>
            </div>
        </div>

        <!-- MODULE 4: EMAIL -->
        <div class="module">
            <div class="module-header">
                <span class="status-indicator"></span> MODULE 4: QUANTUM EMAIL (*.foam)
            </div>
            <div class="module-content" id="email-module">
                <h4>Compose Email</h4>
                <input type="text" id="email-to" placeholder="recipient::hackah.foam" />
                <input type="text" id="email-subject" placeholder="Subject" />
                <textarea id="email-body" rows="4" placeholder="Message"></textarea>
                <button onclick="sendEmail()">Send</button>
                
                <h4 style="margin-top: 20px;">Inbox</h4>
                <div id="email-inbox"></div>
            </div>
        </div>

        <!-- MODULE 5: FILE UPLOAD -->
        <div class="module">
            <div class="module-header">
                <span class="status-indicator"></span> MODULE 5: FILE MANAGEMENT (HOLO)
            </div>
            <div class="module-content" id="file-module">
                <input type="file" id="file-upload" />
                <button onclick="uploadFile()">Upload to Holographic</button>
                
                <div style="margin-top: 20px;">
                    <h4>Admin Controls (hackah::hackah)</h4>
                    <input type="text" id="admin-user" placeholder="Username" />
                    <input type="password" id="admin-pass" placeholder="Password" />
                </div>
                
                <div id="file-list"></div>
                <button onclick="selectAllFiles()">Select All</button>
                <button onclick="deleteSelected()">Delete Selected</button>
                
                <div id="file-pagination"></div>
            </div>
        </div>

        <!-- MODULE 6: QSH SHELL -->
        <div class="module">
            <div class="module-header">
                <span class="status-indicator"></span> MODULE 6: QSH SHELL (*.computer.shell)
            </div>
            <div class="module-content">
                <div class="terminal" id="qsh-terminal">
                    <div>Quantum Shell v1.0 @ *.computer.shell</div>
                    <div>Type 'help' for available commands</div>
                </div>
                <input type="text" class="terminal-input" id="qsh-command" placeholder="qsh command" onkeypress="if(event.key==='Enter') executeQshCommand()" />
                <button onclick="executeQshCommand()">Execute</button>
            </div>
        </div>

        <!-- MODULE 7: COLLIDER -->
        <div class="module">
            <div class="module-header">
                <span class="status-indicator"></span> MODULE 7: COLLIDER (*.computer.collider)
            </div>
            <div class="module-content" id="collider-module">
                <div id="collider-status"></div>
                
                <h4 style="margin-top: 15px;">Collision Spectrum Analysis</h4>
                <button onclick="fetchSpectrum()">Download Spectrum (JSON/HDF5)</button>
                <div id="spectrum-data"></div>
                
                <h4 style="margin-top: 15px;">QSH Chat with Collider</h4>
                <div class="terminal" id="collider-chat" style="min-height: 150px;"></div>
                <input type="text" id="collider-input" placeholder="Query collider system..." onkeypress="if(event.key==='Enter') queryCollider()" />
            </div>
        </div>
    </div>

    <script>
        const socket = io();
        let currentChannel = '0';
        let currentUsername = '';
        let selectedFiles = new Set();

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initializeChannels();
            updateBtcStatus();
            updateColliderStatus();
            setInterval(updateBtcStatus, 5000);
            setInterval(scanNetwork, 10000);
        });

        function initializeChannels() {
            const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const container = document.getElementById('channel-letters');
            for (let letter of letters) {
                const btn = document.createElement('button');
                btn.className = 'channel-btn';
                btn.textContent = letter;
                btn.onclick = () => joinChannel(letter);
                container.appendChild(btn);
            }
        }

        // MODULE 1: Networking
        async function scanNetwork() {
            const response = await fetch('/api/network/scan');
            const data = await response.json();
            
            let html = '<div class="network-node">';
            html += `<div class="metric">Hostname: <span class="metric-value">${data.hostname}</span></div>`;
            html += `<div class="metric">Local IP: <span class="metric-value">${data.local_ip}</span></div>`;
            html += `<div class="metric">Quantum IP: <span class="metric-value">${data.quantum_ip}</span></div>`;
            html += `<div class="metric">Sent: <span class="metric-value">${data.stats.bytes_sent_gb.toFixed(3)} GB</span></div>`;
            html += `<div class="metric">Received: <span class="metric-value">${data.stats.bytes_recv_gb.toFixed(3)} GB</span></div>`;
            html += '</div>';
            
            document.getElementById('network-stats').innerHTML = html;
            
            // TCP Proxy
            const proxy = await fetch('/api/network/tcp_proxy').then(r => r.json());
            document.getElementById('proxy-status').innerHTML = `
                <div class="network-node">
                    <div class="metric">Your IP: <span class="metric-value">${proxy.user_ip}</span></div>
                    <div class="metric">Quantum IP: <span class="metric-value">${proxy.quantum_ip}</span></div>
                    <div class="metric">Proxy IP: <span class="metric-value">${proxy.proxy_ip}</span></div>
                    <div class="metric">Entangled: <span class="metric-value">✓ YES</span></div>
                </div>
            `;
        }

        async function requestNode() {
            const route = document.getElementById('node-route').value;
            const email = document.getElementById('node-email').value;
            
            const response = await fetch('/api/network/request_node', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({route, email})
            });
            
            const data = await response.json();
            document.getElementById('node-response').innerHTML = `
                <div class="network-node">
                    <div>Request submitted!</div>
                    <div class="metric">Assigned QIP: <span class="metric-value">${data.assigned_qip}</span></div>
                </div>
            `;
        }

        // MODULE 2: Chat
        function showRegister() {
            document.getElementById('chat-password2').style.display = 'block';
            document.getElementById('chat-email').style.display = 'block';
        }

        function loginChat() {
            const username = document.getElementById('chat-username').value;
            const password = document.getElementById('chat-password').value;
            
            currentUsername = username;
            socket.emit('login_user', {username, password});
        }

        socket.on('login_success', function(data) {
            document.getElementById('chat-auth').style.display = 'none';
            document.getElementById('chat-interface').style.display = 'block';
            joinChannel('0');
        });

        function joinChannel(channel) {
            currentChannel = channel;
            socket.emit('join_channel', {channel});
        }

        socket.on('channel_joined', function(data) {
            displayMessages(data.messages);
        });

        function sendMessage() {
            const text = document.getElementById('chat-input').value;
            socket.emit('send_message', {channel: currentChannel, text});
            document.getElementById('chat-input').value = '';
        }

        socket.on('new_message', function(message) {
            appendMessage(message);
        });

        function displayMessages(messages) {
            const container = document.getElementById('chat-messages');
            container.innerHTML = messages.map(m => `
                <div class="chat-message">
                    <span class="username">${m.username}</span>: ${m.text}
                    <div class="time">${new Date(m.timestamp).toLocaleTimeString()}</div>
                </div>
            `).join('');
            container.scrollTop = container.scrollHeight;
        }

        function appendMessage(message) {
            const container = document.getElementById('chat-messages');
            container.innerHTML += `
                <div class="chat-message">
                    <span class="username">${message.username}</span>: ${message.text}
                    <div class="time">${new Date(message.timestamp).toLocaleTimeString()}</div>
                </div>
            `;
            container.scrollTop = container.scrollHeight;
        }

        // MODULE 3: Bitcoin
        async function executeBtcCommand() {
            const command = document.getElementById('btc-command').value;
            const terminal = document.getElementById('btc-terminal');
            
            terminal.innerHTML += `\n> ${command}\n`;
            
            if (command === 'help') {
                terminal.innerHTML += `
Commands:
  getblockchaininfo - Blockchain status
  getnewaddress     - Generate new address
  getbalance        - Check balance
  getprice          - Current BTC price
  help              - This message
`;
            } else if (command === 'getblockchaininfo') {
                const status = await fetch('/api/btc/status').then(r => r.json());
                terminal.innerHTML += `Height: ${status.blockchain_height}\nMempool: ${status.mempool_size} GB\n`;
            } else if (command === 'getnewaddress') {
                const wallet = await fetch('/api/btc/wallet/generate', {method: 'POST'}).then(r => r.json());
                terminal.innerHTML += `${wallet.address}\n`;
            } else if (command === 'getprice') {
                const status = await fetch('/api/btc/status').then(r => r.json());
                terminal.innerHTML += `$${status.price_usd.toLocaleString()}\n`;
            }
            
            document.getElementById('btc-command').value = '';
            terminal.scrollTop = terminal.scrollHeight;
        }

        async function updateBtcStatus() {
            const status = await fetch('/api/btc/status').then(r => r.json());
            document.getElementById('btc-status').innerHTML = `
                <div class="metric">Block Height: <span class="metric-value">${status.blockchain_height.toLocaleString()}</span></div>
                <div class="metric">Price: <span class="metric-value">$${status.price_usd.toLocaleString()}</span></div>
                <div class="metric">Mempool: <span class="metric-value">${status.mempool_size} GB</span></div>
            `;
        }

        // MODULE 4: Email
        async function sendEmail() {
            const to = document.getElementById('email-to').value;
            const subject = document.getElementById('email-subject').value;
            const body = document.getElementById('email-body').value;
            
            await fetch('/api/email/send', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({to, subject, body})
            });
            
            alert('Email sent!');
            document.getElementById('email-to').value = '';
            document.getElementById('email-subject').value = '';
            document.getElementById('email-body').value = '';
        }

        // MODULE 5: Files
        async function uploadFile() {
            const fileInput = document.getElementById('file-upload');
            const formData = new FormData();
            formData.append('file', fileInput.files[0]);
            
            await fetch('/api/files/upload', {
                method: 'POST',
                body: formData
            });
            
            alert('File uploaded to holographic storage!');
            loadFiles();
        }

        async function loadFiles(page = 1) {
            const data = await fetch(`/api/files/list?page=${page}`).then(r => r.json());
            
            let html = data.files.map(f => `
                <div class="file-item">
                    <input type="checkbox" onchange="toggleFile('${f.id}')" />
                    <span>${f.filename} (${f.size_gb.toFixed(4)} GB)</span>
                </div>
            `).join('');
            
            document.getElementById('file-list').innerHTML = html;
            document.getElementById('file-pagination').innerHTML = `Page ${data.page} of ${data.total_pages}`;
        }

        function toggleFile(id) {
            if (selectedFiles.has(id)) {
                selectedFiles.delete(id);
            } else {
                selectedFiles.add(id);
            }
        }

        function selectAllFiles() {
            document.querySelectorAll('.file-item input[type="checkbox"]').forEach(cb => cb.checked = true);
        }

        async function deleteSelected() {
            const auth = {
                username: document.getElementById('admin-user').value,
                password: document.getElementById('admin-pass').value
            };
            
            await fetch('/api/files/delete', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({auth, file_ids: Array.from(selectedFiles)})
            });
            
            selectedFiles.clear();
            loadFiles();
        }

        // MODULE 6: QSH Shell
        async function executeQshCommand() {
            const command = document.getElementById('qsh-command').value;
            const terminal = document.getElementById('qsh-terminal');
            
            terminal.innerHTML += `\n$ ${command}\n`;
            
            const response = await fetch('/api/qsh/execute', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({command})
            });
            
            const data = await response.json();
            terminal.innerHTML += data.output + '\n';
            
            document.getElementById('qsh-command').value = '';
            terminal.scrollTop = terminal.scrollHeight;
        }

        // MODULE 7: Collider
        async function updateColliderStatus() {
            const status = await fetch('/api/collider/status').then(r => r.json());
            document.getElementById('collider-status').innerHTML = `
                <div class="network-node">
                    <h4>Black Hole (${status.black_hole.address})</h4>
                    <div class="metric">Mass: <span class="metric-value">${status.black_hole.mass_solar.toExponential(2)} M☉</span></div>
                    <div class="metric">Event Horizon: <span class="metric-value">${(status.black_hole.event_horizon_km/1e6).toFixed(1)} million km</span></div>
                    <div class="metric">Status: <span class="metric-value">${status.black_hole.status}</span></div>
                </div>
                <div class="network-node">
                    <h4>White Hole (${status.white_hole.address})</h4>
                    <div class="metric">Outflow: <span class="metric-value">${status.white_hole.outflow_rate.toExponential(2)} erg/s</span></div>
                    <div class="metric">Status: <span class="metric-value">${status.white_hole.status}</span></div>
                </div>
                <div class="network-node">
                    <h4>Interface</h4>
                    <div class="metric">QSH Link: <span class="metric-value">${status.interface.qsh_link}</span></div>
                    <div class="metric">Data Rate: <span class="metric-value">${(status.interface.data_rate_gbps/1e12).toFixed(0)} TB/s</span></div>
                    <div class="metric">Entanglement Pairs: <span class="metric-value">${status.interface.entanglement_pairs}</span></div>
                </div>
            `;
        }

        async function fetchSpectrum() {
            const spectrum = await fetch('/api/collider/spectrum').then(r => r.json());
            document.getElementById('spectrum-data').innerHTML = `
                <div class="network-node">
                    <div>Spectrum data ready: ${spectrum.energies_ev.length} data points</div>
                    <div>Format: ${spectrum.format}</div>
                    <div>Timestamp: ${spectrum.timestamp}</div>
                    <button onclick="downloadSpectrum()">Download JSON</button>
                </div>
            `;
        }

        function queryCollider() {
            const input = document.getElementById('collider-input').value;
            const chat = document.getElementById('collider-chat');
            chat.innerHTML += `\n> ${input}\n< Collider response: Processing query through black hole interface...\n`;
            document.getElementById('collider-input').value = '';
            chat.scrollTop = chat.scrollHeight;
        }

        // Initialize on load
        scanNetwork();
        loadFiles();
    </script>
</body>
</html>
